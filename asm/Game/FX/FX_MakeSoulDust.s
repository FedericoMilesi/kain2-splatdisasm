.set noat      /* allow manual use of $at */
.set noreorder /* don't insert nops after branches */

glabel FX_MakeSoulDust
/* 37814 80047014 B8FFBD27 */  addiu      $sp, $sp, -0x48
/* 37818 80047018 4000B4AF */  sw         $s4, 0x40($sp)
/* 3781C 8004701C 21A08000 */  addu       $s4, $a0, $zero
/* 37820 80047020 3C00B3AF */  sw         $s3, 0x3C($sp)
/* 37824 80047024 2198A000 */  addu       $s3, $a1, $zero
/* 37828 80047028 4400BFAF */  sw         $ra, 0x44($sp)
/* 3782C 8004702C 3800B2AF */  sw         $s2, 0x38($sp)
/* 37830 80047030 3400B1AF */  sw         $s1, 0x34($sp)
/* 37834 80047034 3AF2020C */  jal        rand
/* 37838 80047038 3000B0AF */   sw        $s0, 0x30($sp)
/* 3783C 8004703C FF004230 */  andi       $v0, $v0, 0xFF
/* 37840 80047040 41004228 */  slti       $v0, $v0, 0x41
/* 37844 80047044 7B004010 */  beqz       $v0, .L80047234
/* 37848 80047048 0D80023C */   lui       $v0, %hi(objectAccess + 0x54)
/* 3784C 8004704C 90A2528C */  lw         $s2, %lo(objectAccess + 0x54)($v0)
/* 37850 80047050 00000000 */  nop
/* 37854 80047054 77004012 */  beqz       $s2, .L80047234
/* 37858 80047058 00000000 */   nop
/* 3785C 8004705C 44BA848F */  lw         $a0, %gp_rel(gFXT)($gp)
/* 37860 80047060 C009010C */  jal        FX_GetPrim
/* 37864 80047064 00000000 */   nop
/* 37868 80047068 21884000 */  addu       $s1, $v0, $zero
/* 3786C 8004706C 71002012 */  beqz       $s1, .L80047234
/* 37870 80047070 00000000 */   nop
/* 37874 80047074 2800A0A7 */  sh         $zero, 0x28($sp)
/* 37878 80047078 3AF2020C */  jal        rand
/* 3787C 8004707C 2A00A0A7 */   sh        $zero, 0x2A($sp)
/* 37880 80047080 21384000 */  addu       $a3, $v0, $zero
/* 37884 80047084 4000838E */  lw         $v1, 0x40($s4)
/* 37888 80047088 0200E104 */  bgez       $a3, .L80047094
/* 3788C 8004708C 21202002 */   addu      $a0, $s1, $zero
/* 37890 80047090 FF01E224 */  addiu      $v0, $a3, 0x1FF
.L80047094:
/* 37894 80047094 2800A527 */  addiu      $a1, $sp, 0x28
/* 37898 80047098 19000624 */  addiu      $a2, $zero, 0x19
/* 3789C 8004709C 43120200 */  sra        $v0, $v0, 9
/* 378A0 800470A0 40120200 */  sll        $v0, $v0, 9
/* 378A4 800470A4 2310E200 */  subu       $v0, $a3, $v0
/* 378A8 800470A8 002E103C */  lui        $s0, (0x2E000000 >> 16)
/* 378AC 800470AC 3C006394 */  lhu        $v1, 0x3C($v1)
/* 378B0 800470B0 2138C000 */  addu       $a3, $a2, $zero
/* 378B4 800470B4 21186200 */  addu       $v1, $v1, $v0
/* 378B8 800470B8 44BA828F */  lw         $v0, %gp_rel(gFXT)($gp)
/* 378BC 800470BC 00FF6324 */  addiu      $v1, $v1, -0x100
/* 378C0 800470C0 2C00A3A7 */  sh         $v1, 0x2C($sp)
/* 378C4 800470C4 1000B0AF */  sw         $s0, 0x10($sp)
/* 378C8 800470C8 1400A0AF */  sw         $zero, 0x14($sp)
/* 378CC 800470CC 1800A0AF */  sw         $zero, 0x18($sp)
/* 378D0 800470D0 1C00A2AF */  sw         $v0, 0x1C($sp)
/* 378D4 800470D4 08000224 */  addiu      $v0, $zero, 0x8
/* 378D8 800470D8 5C22010C */  jal        FX_DFacadeParticleSetup
/* 378DC 800470DC 2000A2AF */   sw        $v0, 0x20($sp)
/* 378E0 800470E0 21204002 */  addu       $a0, $s2, $zero
/* 378E4 800470E4 21280000 */  addu       $a1, $zero, $zero
/* 378E8 800470E8 0C00228E */  lw         $v0, 0xC($s1)
/* 378EC 800470EC 2130A000 */  addu       $a2, $a1, $zero
/* 378F0 800470F0 01204234 */  ori        $v0, $v0, 0x2001
/* 378F4 800470F4 9D19010C */  jal        FX_GetTextureObject
/* 378F8 800470F8 0C0022AE */   sw        $v0, 0xC($s1)
/* 378FC 800470FC 080022AE */  sw         $v0, 0x8($s1)
/* 37900 80047100 00100224 */  addiu      $v0, $zero, 0x1000
/* 37904 80047104 3E0022A6 */  sh         $v0, 0x3E($s1)
/* 37908 80047108 0480023C */  lui        $v0, %hi(FX_SoulDustProcess)
/* 3790C 8004710C 606E4224 */  addiu      $v0, $v0, %lo(FX_SoulDustProcess)
/* 37910 80047110 140022AE */  sw         $v0, 0x14($s1)
/* 37914 80047114 00141300 */  sll        $v0, $s3, 16
/* 37918 80047118 03140200 */  sra        $v0, $v0, 16
/* 3791C 8004711C 1C0030AE */  sw         $s0, 0x1C($s1)
/* 37920 80047120 460020A6 */  sh         $zero, 0x46($s1)
/* 37924 80047124 5C0034AE */  sw         $s4, 0x5C($s1)
/* 37928 80047128 3AF2020C */  jal        rand
/* 3792C 8004712C 600022AE */   sw        $v0, 0x60($s1)
/* 37930 80047130 6666033C */  lui        $v1, (0x66666667 >> 16)
/* 37934 80047134 67666334 */  ori        $v1, $v1, (0x66666667 & 0xFFFF)
/* 37938 80047138 18004300 */  mult       $v0, $v1
/* 3793C 8004713C C31F0200 */  sra        $v1, $v0, 31
/* 37940 80047140 10400000 */  mfhi       $t0
/* 37944 80047144 C3210800 */  sra        $a0, $t0, 7
/* 37948 80047148 23208300 */  subu       $a0, $a0, $v1
/* 3794C 8004714C 80180400 */  sll        $v1, $a0, 2
/* 37950 80047150 21186400 */  addu       $v1, $v1, $a0
/* 37954 80047154 80190300 */  sll        $v1, $v1, 6
/* 37958 80047158 23104300 */  subu       $v0, $v0, $v1
/* 3795C 8004715C 60FF4224 */  addiu      $v0, $v0, -0xA0
/* 37960 80047160 3AF2020C */  jal        rand
/* 37964 80047164 420022A6 */   sh        $v0, 0x42($s1)
/* 37968 80047168 3F004230 */  andi       $v0, $v0, 0x3F
/* 3796C 8004716C 40014224 */  addiu      $v0, $v0, 0x140
/* 37970 80047170 3AF2020C */  jal        rand
/* 37974 80047174 4A0022A6 */   sh        $v0, 0x4A($s1)
/* 37978 80047178 4992033C */  lui        $v1, (0x92492493 >> 16)
/* 3797C 8004717C 93246334 */  ori        $v1, $v1, (0x92492493 & 0xFFFF)
/* 37980 80047180 18004300 */  mult       $v0, $v1
/* 37984 80047184 C31F0200 */  sra        $v1, $v0, 31
/* 37988 80047188 10400000 */  mfhi       $t0
/* 3798C 8004718C 21200201 */  addu       $a0, $t0, $v0
/* 37990 80047190 43220400 */  sra        $a0, $a0, 9
/* 37994 80047194 23208300 */  subu       $a0, $a0, $v1
/* 37998 80047198 C0180400 */  sll        $v1, $a0, 3
/* 3799C 8004719C 23186400 */  subu       $v1, $v1, $a0
/* 379A0 800471A0 C0190300 */  sll        $v1, $v1, 7
/* 379A4 800471A4 23104300 */  subu       $v0, $v0, $v1
/* 379A8 800471A8 80004224 */  addiu      $v0, $v0, 0x80
/* 379AC 800471AC 001C0200 */  sll        $v1, $v0, 16
/* 379B0 800471B0 031C0300 */  sra        $v1, $v1, 16
/* 379B4 800471B4 02006104 */  bgez       $v1, .L800471C0
/* 379B8 800471B8 440022A6 */   sh        $v0, 0x44($s1)
/* 379BC 800471BC 0F006324 */  addiu      $v1, $v1, 0xF
.L800471C0:
/* 379C0 800471C0 4A002486 */  lh         $a0, 0x4A($s1)
/* 379C4 800471C4 03110300 */  sra        $v0, $v1, 4
/* 379C8 800471C8 02008104 */  bgez       $a0, .L800471D4
/* 379CC 800471CC 520022A6 */   sh        $v0, 0x52($s1)
/* 379D0 800471D0 0F008424 */  addiu      $a0, $a0, 0xF
.L800471D4:
/* 379D4 800471D4 03110400 */  sra        $v0, $a0, 4
/* 379D8 800471D8 3AF2020C */  jal        rand
/* 379DC 800471DC 4C0022A6 */   sh        $v0, 0x4C($s1)
/* 379E0 800471E0 01004230 */  andi       $v0, $v0, 0x1
/* 379E4 800471E4 07004010 */  beqz       $v0, .L80047204
/* 379E8 800471E8 00000000 */   nop
/* 379EC 800471EC 44002296 */  lhu        $v0, 0x44($s1)
/* 379F0 800471F0 52002396 */  lhu        $v1, 0x52($s1)
/* 379F4 800471F4 23100200 */  negu       $v0, $v0
/* 379F8 800471F8 23180300 */  negu       $v1, $v1
/* 379FC 800471FC 440022A6 */  sh         $v0, 0x44($s1)
/* 37A00 80047200 520023A6 */  sh         $v1, 0x52($s1)
.L80047204:
/* 37A04 80047204 21202002 */  addu       $a0, $s1, $zero
/* 37A08 80047208 44BA858F */  lw         $a1, %gp_rel(gFXT)($gp)
/* 37A0C 8004720C 44002296 */  lhu        $v0, 0x44($s1)
/* 37A10 80047210 78008396 */  lhu        $v1, 0x78($s4)
/* 37A14 80047214 00044224 */  addiu      $v0, $v0, 0x400
/* 37A18 80047218 23186200 */  subu       $v1, $v1, $v0
/* 37A1C 8004721C 981B010C */  jal        FX_SoulDustProcess
/* 37A20 80047220 440023A6 */   sh        $v1, 0x44($s1)
/* 37A24 80047224 44BA848F */  lw         $a0, %gp_rel(gFXT)($gp)
/* 37A28 80047228 21282002 */  addu       $a1, $s1, $zero
/* 37A2C 8004722C 8F19010C */  jal        FX_Sprite_Insert
/* 37A30 80047230 986D8424 */   addiu     $a0, $a0, 0x6D98
.L80047234:
/* 37A34 80047234 4400BF8F */  lw         $ra, 0x44($sp)
/* 37A38 80047238 4000B48F */  lw         $s4, 0x40($sp)
/* 37A3C 8004723C 3C00B38F */  lw         $s3, 0x3C($sp)
/* 37A40 80047240 3800B28F */  lw         $s2, 0x38($sp)
/* 37A44 80047244 3400B18F */  lw         $s1, 0x34($sp)
/* 37A48 80047248 3000B08F */  lw         $s0, 0x30($sp)
/* 37A4C 8004724C 0800E003 */  jr         $ra
/* 37A50 80047250 4800BD27 */   addiu     $sp, $sp, 0x48
.size FX_MakeSoulDust, . - FX_MakeSoulDust
